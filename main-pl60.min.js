(async()=>{!async function t(){let e="https://hoathinh3d.team/wp-content/themes/halimmovies-child/hh3d-ajax.php",n=t=>new Promise(e=>setTimeout(e,t));function s(t,e,n){let s=document.createElement("div");s.style.position="fixed",s.style.bottom="20px",s.style.right="20px",s.style.maxWidth="320px",s.style.backgroundColor="success"===t?"#d4edda":"#f8d7da",s.style.color="success"===t?"#155724":"#721c24",s.style.border="1px solid",s.style.borderColor="success"===t?"#c3e6cb":"#f5c6cb",s.style.padding="15px",s.style.borderRadius="8px",s.style.boxShadow="0 0 10px rgba(0,0,0,0.2)",s.style.zIndex=9999,s.style.fontFamily="sans-serif",s.style.opacity=0,s.style.transition="opacity 0.5s ease",s.innerHTML=`
      <strong style="display:block;margin-bottom:5px;">${"success"===t?"‚úÖ":"‚ùå"} ${e}</strong>
      <div style="margin-bottom:10px;">${n}</div>
    `,document.body.appendChild(s),requestAnimationFrame(()=>s.style.opacity=1),setTimeout(()=>{s.style.opacity=0,setTimeout(()=>s.remove(),600)},8e3)}async function a(t){let e=await fetch(t);return await e.text()}async function i(t){let n=new FormData;n.append("action","get_next_time_pl"),n.append("security",t);let s=await fetch(e,{method:"POST",body:n}),a=await s.json();return a?.data||null}async function o(t,n){let a=new FormData;a.append("action","open_chest_pl"),a.append("security",t),a.append("chest_id",n);let i=await fetch(e,{method:"POST",body:a}),o=await i.json();return o.success?(s("success",`R∆∞∆°ng ${n}`,o.data.message),console.log(`[PhucLoi] ‚úÖ M·ªü r∆∞∆°ng ${n}: ${o.data.message}`),o.data?.next_chest||null):(s("error",`L·ªói m·ªü r∆∞∆°ng ${n}`,o.data?.message||"Kh\xf4ng r\xf5 l·ªói"),null)}async function r(t){let n=document.querySelectorAll(".gift-box.active");for(let a of n){let i=a.getAttribute("data-id")||"1",o=new FormData;o.append("action","claim_bonus_reward"),o.append("security",t),o.append("chest_id",i);let r=await fetch(e,{method:"POST",body:o}),c=await r.json();c.success?s("success","\uD83C\uDF81 M·ªëc th∆∞·ªüng",`ƒê\xe3 nh·∫≠n m·ªëc r∆∞∆°ng ${i}`):s("error","L·ªói nh·∫≠n m·ªëc",c?.data?.message||"Kh\xf4ng r\xf5 l·ªói")}}let c=await a("https://hoathinh3d.team/phuc-loi-duong"),l=function t(e,n){let s=Array.from(e.matchAll(/<script\b[^>]*>([\s\S]*?)<\/script>/gi));for(let[,a]of s)if(a.includes(n)){let i=a.match(/security\s*:\s*['"]([a-f0-9]{10,})['"]/i);if(i)return i[1]}return null}(c,"get_next_time_pl");if(!l)return s("error","Kh\xf4ng t\xecm th·∫•y token","Security token kh\xf4ng c\xf3");let h=await i(l);if(!h||null===h.reset_rewards&&"4"===h.chest_level)return s("success","Ho\xe0n th\xe0nh","ƒê\xe3 m·ªü ƒë·ªß 4 r∆∞∆°ng h\xf4m nay!");let d=parseInt(h.chest_level||"0")+1;for(;d<=4;)await o(l,d),++d<=4&&await n(36e5);await r(l),s("success","\uD83C\uDF89 Ho\xe0n t·∫•t Ph\xfac L·ª£i","ƒê\xe3 m·ªü h·∫øt r∆∞∆°ng v\xe0 nh·∫≠n m·ªëc!")}(),async function t(){let e="https://hoathinh3d.team/wp-content/themes/halimmovies-child/hh3d-ajax.php";function n(t,e,n){let s=document.createElement("div");s.style.position="fixed",s.style.bottom="20px",s.style.right="20px",s.style.maxWidth="320px",s.style.backgroundColor="success"===t?"#d4edda":"#f8d7da",s.style.color="success"===t?"#155724":"#721c24",s.style.border="1px solid",s.style.borderColor="success"===t?"#c3e6cb":"#f5c6cb",s.style.padding="15px",s.style.borderRadius="8px",s.style.boxShadow="0 0 10px rgba(0,0,0,0.2)",s.style.zIndex=9999,s.style.fontFamily="sans-serif",s.style.opacity=0,s.style.transition="opacity 0.5s ease",s.innerHTML=`
      <strong style="display:block;margin-bottom:5px;">
        ${"success"===t?"‚úÖ":"‚ùå"} ${e}
      </strong>
      <div style="margin-bottom:10px;">${n}</div>
    `,document.body.appendChild(s),requestAnimationFrame(()=>s.style.opacity=1),setTimeout(()=>{s.style.opacity=0,setTimeout(()=>s.remove(),600)},8e3)}async function s(t){let e=await fetch(t);return await e.text()}async function a(t){let n=new FormData;n.append("action","get_remaining_time_tltm"),n.append("security",t);let s=await fetch(e,{method:"POST",body:n}),a=await s.json();return a?.data?.time_remaining||null}async function i(t){let s=new FormData;s.append("action","open_chest_tltm"),s.append("security",t);let a=await fetch(e,{method:"POST",body:s}),i=await a.json();return i.success?(n("success","\uD83C\uDF89 Th\xed Luy·ªán Th\xe0nh C\xf4ng",i.data?.message||"ƒê\xe3 m·ªü r∆∞∆°ng!"),window.confetti&&confetti({particleCount:120,spread:60,origin:{y:.6}}),console.log("[TLTM] ‚úÖ",i)):(n("error","L·ªói m·ªü r∆∞∆°ng",i.data?.message||"Kh\xf4ng r\xf5 l·ªói"),console.error("[TLTM] ‚ùå",i)),i}let o=await s("https://hoathinh3d.team/thi-luyen-tong-mon-hh3d"),r=function t(e){let n=Array.from(e.matchAll(/<script\b[^>]*>([\s\S]*?)<\/script>/gi));for(let[,s]of n)if(s.includes("get_remaining_time_tltm")){let a=s.match(/security\s*:\s*['"]([a-f0-9]{10,})['"]/i);if(a)return a[1]}return null}(o),c=function t(e){let n=e.match(/var\s+customRestNonce\s*=\s*['"]([a-f0-9]{10,})['"]/i);return n?n[1]:null}(o);if(!r||!c){n("error","Thi·∫øu token","Kh\xf4ng t\xecm th·∫•y m\xe3 b·∫£o m·∫≠t.");return}let l=await a(r);if("00:00"===l){let h=await i(r);if(h&&h.data&&"ƒê\xe3 ho\xe0n th\xe0nh Th\xed Luy·ªán T\xf4ng M\xf4n h\xf4m nay, quay l·∫°i v\xe0o ng\xe0y k·∫ø ti·∫øp."===h.data.message){console.log("‚úÖ ƒê\xe3 ho\xe0n th\xe0nh Th\xed Luy·ªán T\xf4ng M\xf4n h\xf4m nay.");return}}else n("error","‚è≥ Ch∆∞a t·ªõi gi·ªù",`Th·ªùi gian c\xf2n l·∫°i: ${l}`),console.log(`[TLTM] Ch∆∞a t·ªõi gi·ªù m·ªü r∆∞∆°ng: ${l}`);setTimeout(()=>{console.log("L·∫∑p l·∫°i sau 60 ph\xfat."),t()},36e5)}(),async function t(){if(!window.confetti){let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js",document.head.appendChild(e)}function n(t,e,n){let s=document.createElement("div");s.style.position="fixed",s.style.bottom="20px",s.style.right="20px",s.style.maxWidth="320px",s.style.backgroundColor="success"===t?"#d4edda":"#f8d7da",s.style.color="success"===t?"#155724":"#721c24",s.style.border="1px solid",s.style.borderColor="success"===t?"#c3e6cb":"#f5c6cb",s.style.padding="15px",s.style.borderRadius="8px",s.style.boxShadow="0 0 10px rgba(0,0,0,0.2)",s.style.zIndex=9999,s.style.fontFamily="sans-serif",s.style.opacity=0,s.style.transition="opacity 0.5s ease",s.innerHTML=`
      <strong style="display:block;margin-bottom:5px;">
        ${"success"===t?"‚úÖ":"‚ùå"} ${e}
      </strong>
      <div style="margin-bottom:10px;">${n}</div>
    `,document.body.appendChild(s),requestAnimationFrame(()=>s.style.opacity=1),setTimeout(()=>{s.style.opacity=0,setTimeout(()=>s.remove(),600)},8e3)}let s=await fetch("https://hoathinh3d.team/hoang-vuc").then(t=>t.text()).catch(()=>null),a=s?.match(/var\s+ajax_boss_nonce\s*=\s*'([^']+)'/)?.[1],i=s?.match(/boss_id\s*==\s*"(\d+)"/)?.[1];if(!a||!i){console.error("‚ùå Kh\xf4ng th·ªÉ l·∫•y ƒë∆∞·ª£c nonce ho·∫∑c bossId!"),n("error","‚öîÔ∏è Ho·∫°t ƒë·ªông: Hoang V·ª±c","Kh\xf4ng t\xecm th·∫•y nonce ho·∫∑c bossId.");return}function o(){let t=`req_${Math.random().toString(36).slice(2)}_${Date.now()}`;console.log(`[‚öîÔ∏è] ƒêang t·∫•n c\xf4ng Boss (${new Date().toLocaleTimeString()})`),$.post("https://hoathinh3d.team/wp-content/themes/halimmovies-child/hh3d-ajax.php",{action:"attack_boss",boss_id:i,nonce:a,request_id:t},function(t){t.success?(n("success","‚úÖ T·∫•n c\xf4ng th\xe0nh c\xf4ng",t.data?.message||"ƒê\xf2n ƒë\xe1nh ƒë\xe3 ƒë∆∞·ª£c ghi nh·∫≠n."),window.confetti&&confetti({particleCount:120,spread:70,origin:{y:.6}})):t.data?.error?.toLowerCase().includes("ƒë\xe3 h·∫øt l∆∞·ª£t")?(n("error","\uD83D\uDED1 D·ª´ng t·∫•n c\xf4ng","ƒê\xe3 h·∫øt l∆∞·ª£t t·∫•n c\xf4ng Boss."),clearInterval(r),$.post("https://hoathinh3d.team/wp-admin/admin-ajax.php",{action:"claim_chest",nonce:a},function(t){if(t.error)n("error","Nh·∫≠n th∆∞·ªüng th·∫•t b·∫°i",t.error);else{let e=[];t.total_rewards?.tu_vi&&e.push(`üåÄ Tu Vi: ${t.total_rewards.tu_vi}`),t.total_rewards?.tinh_thach&&e.push(`üíé Tinh Th·∫°ch: ${t.total_rewards.tinh_thach}`),t.total_rewards?.tinh_huyet&&e.push(`ü©∏ Tinh Huy·∫øt: ${t.total_rewards.tinh_huyet}`),n("success","\uD83C\uDF81 Nh·∫≠n th∆∞·ªüng th\xe0nh c\xf4ng",e.join(", ")||"ƒê\xe3 nh·∫≠n th∆∞·ªüng!"),window.confetti&&confetti({particleCount:150,spread:80,origin:{y:.6}})}},"json").fail(()=>n("error","L·ªói k·∫øt n·ªëi","Kh\xf4ng th·ªÉ k·∫øt n·ªëi ƒë·ªÉ nh·∫≠n th∆∞·ªüng."))):n("error","‚ùå L·ªói t·∫•n c\xf4ng",JSON.stringify(t))},"json").fail(()=>n("error","‚ùå L·ªói k·∫øt n·ªëi","Kh\xf4ng th·ªÉ g·ª≠i y\xeau c·∫ßu t·∫•n c\xf4ng."))}o();let r=setInterval(o,18e5)}(),(async()=>{await runPhucLoi(),await runTLTM(),await attackBoss()})()})();
